{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user-container\"\n};\nconst _hoisted_2 = {\n  class: \"info-container\"\n};\nconst _hoisted_3 = {\n  class: \"user-info-box\"\n};\nconst _hoisted_4 = {\n  class: \"bio-box\"\n};\nconst _hoisted_5 = {\n  class: \"action-buttons\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h1\", null, \"Welcome, \" + _toDisplayString($data.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 个人账户信息 \"), _createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"账户信息\", -1 /* HOISTED */)), _cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    for: \"username\"\n  }, \"用户名\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n    type: \"text\",\n    id: \"username\",\n    placeholder: \"请输入用户名\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.username]]), _cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    for: \"password\"\n  }, \"密码\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    type: \"password\",\n    id: \"password\",\n    placeholder: \"请输入密码\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]])]), _createCommentVNode(\" 个人简介 \"), _createElementVNode(\"div\", _hoisted_4, [_cache[8] || (_cache[8] = _createElementVNode(\"h2\", null, \"个人简介\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.bio = $event),\n    placeholder: \"请输入个人简介\",\n    class: \"bio-edit\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.bio]])])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.saveChanges && $options.saveChanges(...args)),\n    class: \"save-btn\"\n  }, \"保存修改\"), _createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.deleteAccount && $options.deleteAccount(...args)),\n    class: \"delete-btn\"\n  }, \"注销账户\")])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$data","username","_hoisted_2","_createCommentVNode","_hoisted_3","for","_cache","$event","type","id","placeholder","password","_hoisted_4","bio","_hoisted_5","onClick","args","$options","saveChanges","deleteAccount"],"sources":["/home/xuan/selfwork/frontend/src/views/Data_fuc.vue"],"sourcesContent":["/* eslint-disable */\n<template>\n  <div class=\"user-container\">\n    <h1>Welcome, {{ username }}</h1>\n\n    <div class=\"info-container\">\n      <!-- 个人账户信息 -->\n      <div class=\"user-info-box\">\n        <h2>账户信息</h2>\n        <label for=\"username\">用户名</label>\n        <input\n          v-model=\"username\"\n          type=\"text\"\n          id=\"username\"\n          placeholder=\"请输入用户名\"\n          class=\"input-field\"\n        />\n        <label for=\"password\">密码</label>\n        <input\n          v-model=\"password\"\n          type=\"password\"\n          id=\"password\"\n          placeholder=\"请输入密码\"\n          class=\"input-field\"\n        />\n      </div>\n\n      <!-- 个人简介 -->\n      <div class=\"bio-box\">\n        <h2>个人简介</h2>\n        <textarea\n          v-model=\"bio\"\n          placeholder=\"请输入个人简介\"\n          class=\"bio-edit\"\n        ></textarea>\n      </div>\n    </div>\n\n    <div class=\"action-buttons\">\n      <button @click=\"saveChanges\" class=\"save-btn\">保存修改</button>\n      <button @click=\"deleteAccount\" class=\"delete-btn\">注销账户</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"; // 引入 Axios\nexport default {\n  data() {\n    return {\n      bio: this.$route.query.bio || \"\", // 让 bio 成为可编辑的状态\n      username: this.$route.query.username || \"\", // 获取用户名\n      password: \"\", // 用于保存用户输入的密码\n    };\n  },\n  methods: {\n    // 保存修改信息\n    async saveChanges() {\n      try {\n        // 发送 PUT 请求到后端保存修改信息\n        const response = await axios.put(\"http://localhost:5000/api/users/update\", {\n          username: this.username,\n          password: this.password, // 传递密码\n          bio: this.bio, // 传递个人简介\n        });\n        console.log(\"修改后的个人信息已保存:\", response.data);\n        alert(\"个人信息已保存！\");\n      } catch (error) {\n        console.error(\"保存信息时发生错误:\", error);\n        alert(`${error}`);\n      }\n    },\n    // 注销并删除账户\n    async deleteAccount() {\n      try {\n        if (confirm(\"确定要注销账户吗？此操作不可撤销\")) {\n          // 发送 DELETE 请求到后端删除用户\n          const response = await axios.delete(\n            `http://localhost:5000/api/users/delete/${this.username}`\n          );\n          console.log(\"用户账户已删除:\", response.data);\n          alert(\"您的账户已被删除\");\n          // 重定向到登录页面或其他页面\n          this.$router.push(\"/login\");\n        }\n      } catch (error) {\n        console.error(\"注销账户时发生错误:\", error);\n        alert(\"删除账户失败，请稍后再试。\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* 容器样式 */\n.user-container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n  font-family: \"Arial\", sans-serif;\n  text-align: center; /* 保持欢迎标题居中 */\n}\n\n/* 信息框容器样式 */\n.info-container {\n  display: flex;\n  justify-content: space-between;\n  gap: 20px;\n}\n\n/* 账户信息框和个人简介框样式 */\n.user-info-box,\n.bio-box {\n  background-color: #f5f5f5;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  flex: 1;\n}\n\n/* 标题样式 */\nh2 {\n  color: #333;\n  font-size: 1.5rem;\n  margin-bottom: 10px;\n}\n\n/* 输入框样式 */\n.input-field {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 20px;\n  font-size: 1.2rem;\n  border-radius: 5px;\n  border: 1px solid #ccc;\n}\n\n/* 可编辑的个人简介框 */\n.bio-edit {\n  width: 100%;\n  height: 150px;\n  padding: 10px;\n  font-size: 1.2rem;\n  border-radius: 5px;\n  border: 1px solid #ccc;\n  margin-bottom: 20px;\n}\n\n/* 操作按钮的样式 */\n.action-buttons {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n}\n\n.save-btn,\n.delete-btn {\n  padding: 10px 20px;\n  font-size: 1.1rem;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.save-btn {\n  background-color: #4caf50;\n  color: white;\n  border: none;\n}\n\n.save-btn:hover {\n  background-color: #45a049;\n}\n\n.delete-btn {\n  background-color: #f44336;\n  color: white;\n  border: none;\n}\n\n.delete-btn:hover {\n  background-color: #e53935;\n}\n</style>\n"],"mappings":";;EAEOA,KAAK,EAAC;AAAgB;;EAGpBA,KAAK,EAAC;AAAgB;;EAEpBA,KAAK,EAAC;AAAe;;EAqBrBA,KAAK,EAAC;AAAS;;EAUjBA,KAAK,EAAC;AAAgB;;uBApC7BC,mBAAA,CAwCM,OAxCNC,UAwCM,GAvCJC,mBAAA,CAAgC,YAA5B,WAAS,GAAAC,gBAAA,CAAGC,KAAA,CAAAC,QAAQ,kBAExBH,mBAAA,CA+BM,OA/BNI,UA+BM,GA9BJC,mBAAA,YAAe,EACfL,mBAAA,CAkBM,OAlBNM,UAkBM,G,0BAjBJN,mBAAA,CAAa,YAAT,MAAI,sB,0BACRA,mBAAA,CAAiC;IAA1BO,GAAG,EAAC;EAAU,GAAC,KAAG,sB,gBACzBP,mBAAA,CAME;IAhBV,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAWmBP,KAAA,CAAAC,QAAQ,GAAAM,MAAA;IACjBC,IAAI,EAAC,MAAM;IACXC,EAAE,EAAC,UAAU;IACbC,WAAW,EAAC,QAAQ;IACpBf,KAAK,EAAC;iDAJGK,KAAA,CAAAC,QAAQ,E,6BAMnBH,mBAAA,CAAgC;IAAzBO,GAAG,EAAC;EAAU,GAAC,IAAE,sB,gBACxBP,mBAAA,CAME;IAxBV,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmBmBP,KAAA,CAAAW,QAAQ,GAAAJ,MAAA;IACjBC,IAAI,EAAC,UAAU;IACfC,EAAE,EAAC,UAAU;IACbC,WAAW,EAAC,OAAO;IACnBf,KAAK,EAAC;iDAJGK,KAAA,CAAAW,QAAQ,E,KAQrBR,mBAAA,UAAa,EACbL,mBAAA,CAOM,OAPNc,UAOM,G,0BANJd,mBAAA,CAAa,YAAT,MAAI,sB,gBACRA,mBAAA,CAIY;IAlCpB,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA+BmBP,KAAA,CAAAa,GAAG,GAAAN,MAAA;IACZG,WAAW,EAAC,SAAS;IACrBf,KAAK,EAAC;iDAFGK,KAAA,CAAAa,GAAG,E,OAOlBf,mBAAA,CAGM,OAHNgB,UAGM,GAFJhB,mBAAA,CAA2D;IAAlDiB,OAAK,EAAAT,MAAA,QAAAA,MAAA,UAAAU,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IAAErB,KAAK,EAAC;KAAW,MAAI,GAClDG,mBAAA,CAA+D;IAAtDiB,OAAK,EAAAT,MAAA,QAAAA,MAAA,UAAAU,IAAA,KAAEC,QAAA,CAAAE,aAAA,IAAAF,QAAA,CAAAE,aAAA,IAAAH,IAAA,CAAa;IAAErB,KAAK,EAAC;KAAa,MAAI,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}